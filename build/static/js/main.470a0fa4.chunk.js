(this["webpackJsonpqkart-frontend-v2-hooks"]=this["webpackJsonpqkart-frontend-v2-hooks"]||[]).push([[0],{127:function(e,t,a){},148:function(e,t,a){},149:function(e,t,a){},156:function(e,t,a){},158:function(e,t,a){},159:function(e,t,a){},160:function(e,t,a){},161:function(e,t,a){},162:function(e,t,a){},163:function(e,t,a){},164:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(33),s=a.n(c),i=(a(127),a(15)),o=a(25),d=a(9),l=a(229),u=a(223),j=a(233),h=a(227),b=a(211),p=a(22),O=a.n(p),x=a(38),m=(a(148),a(1)),f=function(){return Object(m.jsxs)(b.a,{className:"footer",children:[Object(m.jsx)(b.a,{children:Object(m.jsx)("img",{src:"logo_dark.svg",alt:"QKart-icon"})}),Object(m.jsx)("p",{className:"footer-text",children:"QKart is your one stop solution to the buy the latest trending items with India's Fastest Delivery to your doorstep"})]})},g=a(112),v=a.n(g),w=a(230),y=a(20),k=a(212),C=(a(149),function(e){var t=e.children,a=e.hasHiddenAuthButtons,n=Object(y.f)(),r=localStorage.getItem("username");return Object(m.jsxs)(k.a,{className:"header",children:[Object(m.jsx)(k.a,{className:"header-title",children:Object(m.jsx)("img",{src:"logo_light.svg",alt:"QKart-icon"})}),t,a?Object(m.jsx)(h.a,{className:"explore-button",startIcon:Object(m.jsx)(v.a,{}),variant:"text",onClick:function(e){n.push("/")},children:"Back to explore"}):r?Object(m.jsxs)(l.a,{direction:"row",spacing:2,alignItems:"center",children:[Object(m.jsx)(w.a,{alt:r,src:"/public/avatar.png"}),Object(m.jsxs)("p",{children:[" ",r]}),Object(m.jsx)(h.a,{variant:"contained",onClick:function(){localStorage.clear(),window.location.reload()},children:"LOGOUT"})]}):Object(m.jsxs)(l.a,{direction:"row",spacing:2,children:[Object(m.jsx)(h.a,{variant:"contained",onClick:function(e){n.push("/login")},children:"LOGIN"}),Object(m.jsx)(h.a,{variant:"contained",onClick:function(e){n.push("/register")},children:"REGISTER"})]})]})}),S=(a(156),a(34)),N=function(){var e=Object(x.b)().enqueueSnackbar,t=Object(n.useState)(""),a=Object(d.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),p=Object(d.a)(s,2),g=p[0],v=p[1],w=Object(n.useState)(""),k=Object(d.a)(w,2),N=k[0],A=k[1],I=Object(n.useState)(!1),q=Object(d.a)(I,2),P=q[0],D=q[1],E=Object(y.f)(),T=function(){var t=Object(o.a)(Object(i.a)().mark((function t(a){var n,r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return D(!0),n=se.endpoint,console.log(n),t.prev=3,t.next=6,O.a.post("".concat(n,"/auth/register"),{username:a.username,password:a.password});case 6:r=t.sent,console.log(r.data),D(!1),e("Registered successfully",{variant:"success"}),E.push("/login"),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),O.a.post("".concat(n,"/auth/register"),{username:a.username,password:a.password}).catch((function(t){t.response?e(t.response.data.message,{variant:"error"}):e("Something went wrong. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"})})),D(!1);case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}(),B={username:r,password:g,confirmPassword:N},z=function(t){var a=t.username,n=t.password,r=t.confirmPassword,c=a.length,s=n.length;return c<1?(e("Username is a required field",{variant:"warning"}),!1):c<6?(e("Username must be at least 6 characters",{variant:"warning"}),!1):s<1?(e("Password is a required field",{variant:"warning"}),!1):s<6?(e("Password must be at least 6 characters",{variant:"warning"}),!1):n===r||(e("Passwords do not match",{variant:"warning"}),!1)};return Object(m.jsxs)(b.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"100vh",children:[Object(m.jsx)(C,{hasHiddenAuthButtons:!0}),Object(m.jsx)(b.a,{className:"content",children:Object(m.jsxs)(l.a,{spacing:2,className:"form",children:[Object(m.jsx)("h2",{className:"title",children:"Register"}),Object(m.jsx)(u.a,{id:"username",label:"Username",variant:"outlined",title:"Username",name:"username",placeholder:"Enter Username",onChange:function(e){return c(e.target.value)},fullWidth:!0}),Object(m.jsx)(u.a,{id:"password",variant:"outlined",label:"Password",name:"password",type:"password",helperText:"Password must be atleast 6 characters length",fullWidth:!0,placeholder:"Enter a password with minimum 6 characters",onChange:function(e){return v(e.target.value)}}),Object(m.jsx)(u.a,{id:"confirmPassword",variant:"outlined",label:"Confirm Password",name:"confirmPassword",onChange:function(e){return A(e.target.value)},type:"password",fullWidth:!0}),P?Object(m.jsx)(b.a,{sx:{display:"flex",justifyContent:"center"},children:Object(m.jsx)(j.a,{})}):Object(m.jsx)(h.a,{onClick:function(){z(B)&&T(B)},className:"button",variant:"contained",children:"Register Now"}),Object(m.jsxs)("p",{className:"secondary-action",children:["Already have an account?"," ",Object(m.jsx)(S.b,{to:"/login",className:"link",children:"Login here"})]})]})}),Object(m.jsx)(f,{})]})},A=a(219),I=a(220),q=a(241),P=a(232),D=(a(158),a(215)),E=a(234),T=a(235),B=a(236),z=a(237),R=a(238),_=a(226),W=a(239),J=(a(159),function(e){var t=e.product,a=e.handleAddToCart,n=t.name,r=t.cost,c=t.rating,s=t.image,i=t._id;return Object(m.jsxs)(E.a,{className:"card",sx:{maxWidth:385},children:[Object(m.jsxs)(T.a,{children:[Object(m.jsx)(B.a,{component:"img",height:"240",image:s,alt:n}),Object(m.jsxs)(z.a,{children:[Object(m.jsx)(R.a,{gutterBottom:!0,variant:"h5",component:"div",children:n}),Object(m.jsxs)(R.a,{gutterBottom:!0,variant:"h6",component:"div",children:["$",r]}),Object(m.jsx)(_.a,{name:"read-only",value:c,readOnly:!0})]})]}),Object(m.jsx)(W.a,{children:Object(m.jsxs)(h.a,{size:"",fullWidth:!0,color:"primary",variant:"contained",value:i,onClick:a,children:[Object(m.jsx)(D.a,{}),"  ADD TO CART"]})})]})}),L=a(216),F=a(217),U=a(218),$=a(240),H=(a(160),function(e,t){for(var a=new Map,n=0;n<t.length;n++)a.set(t[n]._id,t[n]);var r=[];return e.forEach((function(e){var t=a.get(e.productId);t.quantity=e.qty,r.push(t)})),r}),Q=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0,a=0;a<e.length;a++)t+=e[a].quantity*e[a].cost;return t},Y=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=0,a=0;a<e.length;a++)t+=e[a].quantity;return t},G=function(e){var t=e.value,a=e.handleAdd,n=e.handleDelete,r=e.productId;return Object(m.jsxs)(l.a,{direction:"row",alignItems:"center",children:[Object(m.jsx)($.a,{size:"small",color:"primary",onClick:function(e){n(r,"-")},children:Object(m.jsx)(L.a,{})}),Object(m.jsx)(b.a,{padding:"0.5rem","data-testid":"item-qty",children:t}),Object(m.jsx)($.a,{size:"small",color:"primary",onClick:function(e){a(r,"handleAdd")},children:Object(m.jsx)(F.a,{})})]})};function K(e){var t=e.items,a=t.image,n=t.name,r=t.cost,c=t.quantity,s=t._id;return Object(m.jsxs)(b.a,{display:"flex",alignItems:"flex-start",padding:"1rem",children:[Object(m.jsx)(b.a,{className:"image-container",children:Object(m.jsx)("img",{src:a,alt:n,width:"100%",height:"100%"})}),Object(m.jsxs)(b.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",height:"6rem",paddingX:"1rem",children:[Object(m.jsx)("div",{children:n}),Object(m.jsxs)(b.a,{display:"flex",justifyContent:"space-between",alignItems:"center",children:[e.isReadOnly?Object(m.jsxs)(b.a,{children:["Qty:",c]}):Object(m.jsx)(G,{value:c,handleAdd:e.buttonClick,handleDelete:e.buttonClick,productId:s}),Object(m.jsxs)(b.a,{padding:"0.5rem",fontWeight:"700",children:["$",r]})]})]})]})}var M=function(e){e.products;var t=e.items,a=void 0===t?[]:t,n=e.handleQuantity,r=e.isReadOnly,c=Object(y.f)();return a.length?Object(m.jsx)(m.Fragment,{children:Object(m.jsxs)(b.a,{className:"cart",children:[a.map((function(e){return r?Object(m.jsx)(K,{isReadOnly:!0,items:e,buttonClick:n},e._id):Object(m.jsx)(K,{items:e,buttonClick:n},e._id)})),Object(m.jsxs)(b.a,{padding:"1rem",display:"flex",justifyContent:"space-between",alignItems:"center",children:[Object(m.jsx)(b.a,{color:"#3C3C3C",alignSelf:"center",children:"Order total"}),Object(m.jsxs)(b.a,{color:"#3C3C3C",fontWeight:"700",fontSize:"1.5rem",alignSelf:"center","data-testid":"cart-total",children:["$",Q(a)]})]}),Object(m.jsx)(b.a,{display:"flex",justifyContent:"flex-end",className:"cart-footer",children:"/checkout"===window.location.pathname?Object(m.jsx)(m.Fragment,{}):Object(m.jsx)(h.a,{color:"primary",variant:"contained",onClick:function(e){c.push("/checkout")},className:"checkout-btn",children:"Checkout"})})]})}):Object(m.jsxs)(b.a,{className:"cart empty",children:[Object(m.jsx)(U.a,{className:"empty-cart-icon"}),Object(m.jsx)(b.a,{color:"#aaa",textAlign:"center",children:"Cart is empty. Add more items to the cart to checkout."})]})},V=function(){var e=Object(x.b)().enqueueSnackbar,t=Object(n.useState)([]),a=Object(d.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(!1),l=Object(d.a)(s,2),h=l[0],p=l[1],g=Object(n.useState)(!1),v=Object(d.a)(g,2),w=v[0],y=v[1],k=Object(n.useState)(""),S=Object(d.a)(k,2),N=S[0],D=S[1],E=Object(n.useState)(!1),T=Object(d.a)(E,2),B=T[0],z=T[1],R=Object(n.useState)([]),_=Object(d.a)(R,2),W=_[0],L=_[1],F=Object(n.useState)([]),U=Object(d.a)(F,2),$=U[0],Q=U[1],Y=Object(n.useState)(""),G=Object(d.a)(Y,2),K=G[0],V=G[1],X=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var t,a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p(!0),t=se.endpoint,e.next=5,O.a.get("".concat(t,"/products"));case 5:return a=e.sent,c(a.data),p(!1),e.abrupt("return",a.data);case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.message);case 14:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(){return e.apply(this,arguments)}}(),Z=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var a,n;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,a=se.endpoint,e.next=4,O.a.get("".concat(a,"/products/search?value=").concat(t)).catch((function(e){y(!0)}));case 4:(n=e.sent).data&&(y(!1),c(n.data)),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),console.log(e.t0.message);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}(),ee=function(e,t){clearTimeout(t);var a=setTimeout((function(){return Z(e)}),500);D(a)};Object(n.useEffect)((function(){function e(){return(e=Object(o.a)(Object(i.a)().mark((function e(){var t,a,n,r;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X();case 2:if(t=e.sent,localStorage.getItem("username")&&z(!0),!(a=localStorage.getItem("token"))){e.next=16;break}return V(a),e.next=10,te(a);case 10:return n=e.sent,Q(n),e.next=14,H(n,t);case 14:r=e.sent,L(r);case 16:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var te=function(){var t=Object(o.a)(Object(i.a)().mark((function t(a){var n,r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a){t.next=2;break}return t.abrupt("return");case 2:return t.prev=2,n=se.endpoint+"/cart",t.next=6,O.a.get(n,{headers:{Authorization:"Bearer ".concat(a)}});case 6:return r=t.sent,t.abrupt("return",r.data);case 10:return t.prev=10,t.t0=t.catch(2),t.t0.response&&400===t.t0.response.status?e(t.t0.response.data.message,{variant:"error"}):e("Could not fetch cart details. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"}),t.abrupt("return",null);case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}(),ae=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t,a,n,r,c){var s,o,d,l,u,j,h,b,p,x=arguments;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!0!==(s=x.length>5&&void 0!==x[5]?x[5]:{preventDuplicate:!1}).preventDuplicate){e.next=18;break}return e.prev=2,o=se.endpoint+"/cart",e.next=6,O.a.post(o,{productId:r,qty:c},{headers:{Authorization:"Bearer ".concat(t)}});case 6:return d=e.sent,e.next=9,H(d.data,n);case 9:l=e.sent,L(l),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(2),console.log(e.t0);case 16:e.next=28;break;case 18:for(j=0;j<a.length;j++)a[j].productId===r&&(u=j);return"handleAdd"===s.preventDuplicate?a[u].qty++:a[u].qty--,h=se.endpoint+"/cart",e.next=23,O.a.post(h,{productId:r,qty:a[u].qty},{headers:{Authorization:"Bearer ".concat(t)}});case 23:return b=e.sent,e.next=26,H(b.data,n);case 26:p=e.sent,L(p);case 28:case"end":return e.stop()}}),e,null,[[2,13]])})));return function(t,a,n,r,c){return e.apply(this,arguments)}}(),ne=function(t){B?function(t,a){for(var n=0;n<t.length;n++)if(t[n]._id===a)return e("Item already in cart. Use the cart sidebar to update quantity or remove item.",{variant:"warning"}),!0;return!1}(W,t.target.value)?e("Item already in cart. Use the cart sidebar to update quantity or remove item.",{variant:"warning"}):ae(K,$,r,t.target.value,1,{preventDuplicate:!0}):e("Login to add an item to the Cart",{variant:"warning"})};return Object(m.jsxs)("div",{children:[Object(m.jsx)(C,{hasHiddenAuthButtons:!1,children:Object(m.jsx)(u.a,{className:"search-desktop",size:"small",onChange:function(e){ee(e.target.value,N)},InputProps:{endAdornment:Object(m.jsx)(q.a,{position:"end",children:Object(m.jsx)(A.a,{color:"primary"})})},placeholder:"Search for items/categories",name:"search"})}),Object(m.jsx)(u.a,{className:"search-mobile",size:"small",fullWidth:!0,onChange:function(e){ee(e.target.value,N)},InputProps:{endAdornment:Object(m.jsx)(q.a,{position:"end",children:Object(m.jsx)(A.a,{color:"primary"})})},placeholder:"Search for items/categories",name:"search"}),Object(m.jsx)(P.a,{container:!0,justifyContent:"center",children:Object(m.jsx)(P.a,{item:!0,className:"product-grid",children:Object(m.jsx)(b.a,{className:"hero",children:Object(m.jsxs)("p",{className:"hero-heading",children:["India\u2019s ",Object(m.jsx)("span",{className:"hero-highlight",children:"FASTEST DELIVERY"})," ","to your door step"]})})})}),h?Object(m.jsxs)("div",{className:"loading",children:[Object(m.jsx)(j.a,{}),Object(m.jsx)("h3",{children:"Loading Products"})]}):w?Object(m.jsxs)("div",{className:"loading",children:[Object(m.jsx)(I.a,{}),Object(m.jsx)("h3",{children:"No products found"})]}):Object(m.jsx)(m.Fragment,{children:B?Object(m.jsxs)(P.a,{container:!0,children:[Object(m.jsx)(P.a,{container:!0,spacing:{xs:2,md:3,lg:1},md:9,children:r.map((function(e){return Object(m.jsx)(P.a,{item:!0,lg:4,md:4,sm:6,xs:6,mt:2,mb:2,children:Object(m.jsx)(J,{product:e,handleAddToCart:function(e){ne(e)}})},e._id)}))}),Object(m.jsx)(P.a,{md:3,sm:12,xs:12,sx:{backgroundColor:"#E9F5E1"},children:Object(m.jsx)(M,{product:r,items:W,handleQuantity:function(e,t){console.log("Button Click"),console.log(e,t),ae(K,$,r,e,null,{preventDuplicate:t})}})})]}):Object(m.jsx)(P.a,{container:!0,children:Object(m.jsx)(P.a,{container:!0,spacing:{xs:2,md:3,lg:1},children:r.map((function(e){return Object(m.jsx)(P.a,{item:!0,lg:3,md:6,sm:6,xs:6,mt:2,mb:2,children:Object(m.jsx)(J,{product:e,handleAddToCart:function(e){ne(e)}})},e._id)}))})})}),Object(m.jsx)(f,{})]})},X=(a(161),function(){var e=Object(x.b)().enqueueSnackbar,t=Object(n.useState)(""),a=Object(d.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),j=Object(d.a)(s,2),p=j[0],g=j[1],v=Object(y.f)(),w=function(){var t=Object(o.a)(Object(i.a)().mark((function t(a){var n,r,c,s,o,d;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=se.endpoint,t.prev=1,t.next=4,O.a.post("".concat(n,"/auth/login"),a);case 4:(r=t.sent).data.success&&(e("Logged in successfully",{variant:"success"}),c=r.data,s=c.token,o=c.username,d=c.balance,A(s,o,d-0)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),O.a.post("".concat(n,"/auth/login"),a).catch((function(t){t.response?(console.log(t.response),e(t.response.data.message,{variant:"error"})):e("Something went wrong. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"})}));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),k={username:r,password:p},N=function(t){var a=t.username,n=t.password;return""===a?(e("Username is a required field",{variant:"warning"}),!1):!(""===n||n.length<6)||(e("Password is a required field",{variant:"warning"}),!1)},A=function(e,t,a){localStorage.setItem("token",e),localStorage.setItem("username",t),localStorage.setItem("balance",a),v.push("/")};return Object(m.jsxs)(b.a,{display:"flex",flexDirection:"column",justifyContent:"space-between",minHeight:"100vh",children:[Object(m.jsx)(C,{hasHiddenAuthButtons:!0}),Object(m.jsx)(b.a,{className:"content",children:Object(m.jsxs)(l.a,{spacing:2,className:"form",children:[Object(m.jsx)("h2",{className:"title",children:"Login"}),Object(m.jsx)(u.a,{id:"username",label:"username",name:"username",value:r,onChange:function(e){return c(e.target.value)},type:"text",variant:"outlined",fullWidth:!0}),Object(m.jsx)(u.a,{id:"password",label:"password",type:"password",name:"password",value:p,onChange:function(e){return g(e.target.value)},variant:"outlined",fullWidth:!0}),Object(m.jsx)(h.a,{className:"button",variant:"contained",onClick:function(){N(k)&&w(k)},children:"LOGIN TO QKART"}),Object(m.jsxs)("p",{className:"secondary-action",children:["Don\u2019t have an account?"," ",Object(m.jsx)(S.b,{to:"/register",className:"link",children:"Register now"})]})]})}),Object(m.jsx)(f,{})]})}),Z=a(35),ee=a(221),te=a(222),ae=a(242),ne=(a(162),function(e){var t=e.token,a=e.newAddress,n=e.handleNewAddress,r=e.addAddress;return Object(m.jsxs)(b.a,{display:"flex",flexDirection:"column",children:[Object(m.jsx)(u.a,{multiline:!0,minRows:4,onChange:function(e){n({value:e.target.value})},placeholder:"Enter your complete address"}),Object(m.jsxs)(l.a,{direction:"row",my:"1rem",children:[Object(m.jsx)(h.a,{variant:"contained",onClick:function(e){r(t,a.value),n({isAddingNewAddress:!1,value:""})},children:"Add"}),Object(m.jsx)(h.a,{variant:"text",onClick:function(e){n((function(e){return Object(Z.a)(Object(Z.a)({},e),{},{isAddingNewAddress:!1,value:""})}))},children:"Cancel"})]})]})}),re=function(){var e=localStorage.getItem("token"),t="address-item ",a=Object(y.f)(),r=Object(x.b)().enqueueSnackbar,c=Object(n.useState)([]),s=Object(d.a)(c,2),l=s[0],u=s[1],j=Object(n.useState)([]),p=Object(d.a)(j,2),g=p[0],v=p[1],w=Object(n.useState)({all:[],selected:""}),k=Object(d.a)(w,2),S=k[0],N=k[1],A=Object(n.useState)({isAddingNewAddress:!1,value:""}),I=Object(d.a)(A,2),q=I[0],D=I[1],E=function(){var e=Object(o.a)(Object(i.a)().mark((function e(){var t;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,O.a.get("".concat(se.endpoint,"/products"));case 3:return t=e.sent,v(t.data),e.abrupt("return",t.data);case 8:if(e.prev=8,e.t0=e.catch(0),!e.t0.response||500!==e.t0.response.status){e.next=15;break}return r(e.t0.response.data.message,{variant:"error"}),e.abrupt("return",null);case 15:r("Could not fetch products. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"});case 16:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,O.a.get("".concat(se.endpoint,"/cart"),{headers:{Authorization:"Bearer ".concat(t)}});case 5:return a=e.sent,e.abrupt("return",a.data);case 9:return e.prev=9,e.t0=e.catch(2),r("Could not fetch cart details. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"}),e.abrupt("return",null);case 13:case"end":return e.stop()}}),e,null,[[2,9]])})));return function(t){return e.apply(this,arguments)}}(),B=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t){var a;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,O.a.get("".concat(se.endpoint,"/user/addresses"),{headers:{Authorization:"Bearer ".concat(t)}});case 5:return a=e.sent,N(Object(Z.a)(Object(Z.a)({},S),{},{all:a.data})),e.abrupt("return",a.data);case 10:return e.prev=10,e.t0=e.catch(2),r("Could not fetch addresses. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"}),e.abrupt("return",null);case 14:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t){return e.apply(this,arguments)}}(),z=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t,a){var n,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=se.endpoint+"/user/addresses",e.next=4,O.a.post(n,{address:a},{headers:{Authorization:"Bearer ".concat(t)}});case 4:return c=e.sent,N({all:c.data,isAddingNewAddress:!1}),e.abrupt("return",c.data);case 9:e.prev=9,e.t0=e.catch(0),e.t0.response?r(e.t0.response.data.message,{variant:"error"}):r("Could not add this address. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),_=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t,a){var n,c;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,n=se.endpoint+"/user/addresses/"+a,e.next=4,O.a.delete(n,{headers:{Authorization:"Bearer ".concat(t)}});case 4:return c=e.sent,N(Object(Z.a)(Object(Z.a)({},S),{},{all:c.data})),e.abrupt("return",c.data);case 9:e.prev=9,e.t0=e.catch(0),e.t0.response?r(e.t0.response.data.message,{variant:"error"}):r("Could not delete this address. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"});case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,a){return e.apply(this,arguments)}}(),W=function(e,t){return Q(e)>localStorage.getItem("balance")?(r("You do not have enough balance in your wallet for this purchase",{variant:"warning"}),!1):0===t.all.length?(r("Please add a new address before proceeding.",{variant:"warning"}),!1):!!t.selected||(r("Please select one shipping address to proceed.",{variant:"warning"}),!1)},J=function(){var e=Object(o.a)(Object(i.a)().mark((function e(t,n,c){var s,o,d;return Object(i.a)().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!W(n,c)){e.next=13;break}return e.prev=2,s=se.endpoint+"/cart/checkout",e.next=6,O.a.post(s,{addressId:c.selected},{headers:{Authorization:"Bearer ".concat(t)}});case 6:e.sent.data&&(o=localStorage.getItem("balance"),d=o-Q(n),localStorage.setItem("balance",d),a.push("/thanks")),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(2),e.t0.response?r(e.t0.response.data.message,{variant:"error"}):r("Could not add this address. Check that the backend is running, reachable and returns valid JSON.",{variant:"error"});case 13:case"end":return e.stop()}}),e,null,[[2,10]])})));return function(t,a,n){return e.apply(this,arguments)}}();return Object(n.useEffect)((function(){var t=function(){var t=Object(o.a)(Object(i.a)().mark((function t(){var a,n,r;return Object(i.a)().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,E();case 2:return a=t.sent,t.next=5,T(e);case 5:if(n=t.sent,!a||!n){t.next=11;break}return t.next=9,H(n,a);case 9:r=t.sent,u(r);case 11:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();t()}),[]),Object(n.useEffect)((function(){e?B(e):(r("You must be logged in to access checkout page",{variant:"info"}),a.push("/"))}),[e]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(C,{}),Object(m.jsxs)(P.a,{container:!0,children:[Object(m.jsx)(P.a,{item:!0,xs:12,md:9,children:Object(m.jsxs)(b.a,{className:"shipping-container",minHeight:"100vh",children:[Object(m.jsx)(R.a,{color:"#3C3C3C",variant:"h4",my:"1rem",children:"Shipping"}),Object(m.jsx)(R.a,{color:"#3C3C3C",my:"1rem",children:"Manage all the shipping addresses you want. This way you won't have to enter the shipping address manually with every order. Select the address you want to get your order delivered."}),Object(m.jsx)(ae.a,{}),Object(m.jsx)(b.a,{children:0!==S.all.length?S.all.map((function(a){return t=S.selected===a._id?"address-item selected":"address-item not-selected",Object(m.jsxs)("div",{className:t,onClick:function(e){N(Object(Z.a)(Object(Z.a)({},S),{},{selected:a._id}))},children:[Object(m.jsx)("p",{my:"1rem",children:a.address}),Object(m.jsx)(h.a,{startIcon:Object(m.jsx)(ee.a,{}),id:a._id,onClick:function(t){_(e,t.target.id)},children:"Delete"})]},a._id)})):Object(m.jsx)(R.a,{my:"1rem",children:"No addresses found for this account. Please add one to proceed"})}),!1===q.isAddingNewAddress?Object(m.jsx)(h.a,{color:"primary",variant:"contained",id:"add-new-btn",size:"large",onClick:function(){D((function(e){return Object(Z.a)(Object(Z.a)({},e),{},{isAddingNewAddress:!0})}))},children:"Add new address"}):Object(m.jsx)(ne,{token:e,newAddress:q,handleNewAddress:D,addAddress:z}),Object(m.jsx)(R.a,{color:"#3C3C3C",variant:"h4",my:"1rem",children:"Payment"}),Object(m.jsx)(R.a,{color:"#3C3C3C",my:"1rem",children:"Payment Method"}),Object(m.jsx)(ae.a,{}),Object(m.jsxs)(b.a,{my:"1rem",children:[Object(m.jsx)(R.a,{children:"Wallet"}),Object(m.jsxs)(R.a,{children:["Pay $",Q(l)," of available $",localStorage.getItem("balance")]})]}),Object(m.jsx)(h.a,{startIcon:Object(m.jsx)(te.a,{}),variant:"contained",onClick:function(t){J(e,l,S)},children:"PLACE ORDER"})]})}),Object(m.jsxs)(P.a,{item:!0,xs:12,md:3,bgcolor:"#E9F5E1",children:[Object(m.jsx)(M,{isReadOnly:!0,products:g,items:l}),Object(m.jsxs)(b.a,{className:"cart",p:1,children:[Object(m.jsx)("h2",{children:"Order Details"}),Object(m.jsxs)("table",{children:[Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Products"}),Object(m.jsx)("td",{children:Y(l)})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"SubTotal"}),Object(m.jsxs)("td",{children:["$",Q(l)]})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:"Shipping Charges"}),Object(m.jsx)("td",{children:"$0"})]}),Object(m.jsxs)("tr",{children:[Object(m.jsx)("td",{children:Object(m.jsx)("h3",{children:"Total"})}),Object(m.jsx)("td",{children:Object(m.jsxs)("h3",{children:["$",Q(l)]})})]})]})]})]})]}),Object(m.jsx)(f,{})]})},ce=(a(163),function(){var e=Object(y.f)();return Object(n.useEffect)((function(){localStorage.getItem("token")||e.push("/")}),[e]),Object(m.jsxs)(m.Fragment,{children:[Object(m.jsx)(C,{}),Object(m.jsxs)(b.a,{className:"greeting-container",children:[Object(m.jsx)("h2",{children:"Yay! It's ordered \ud83d\ude03"}),Object(m.jsx)("p",{children:"You will receive an invoice for your order shortly."}),Object(m.jsx)("p",{children:"Your order will arrive in 7 business days."}),Object(m.jsx)("p",{id:"balance-overline",children:"Wallet Balance"}),Object(m.jsxs)("p",{id:"balance",children:["$",localStorage.getItem("balance")," Available"]}),Object(m.jsx)(h.a,{variant:"contained",size:"large",id:"continue-btn",onClick:function(){e.push("/")},children:"Continue Shopping"})]}),Object(m.jsx)(f,{})]})}),se={endpoint:"https://qkart-frontend-10h6.onrender.com/api/v1"};var ie=function(){return Object(m.jsx)("div",{className:"App",children:Object(m.jsxs)(y.c,{children:[Object(m.jsx)(y.a,{path:"/register",children:Object(m.jsx)(N,{})}),Object(m.jsx)(y.a,{path:"/login",children:Object(m.jsx)(X,{})}),Object(m.jsx)(y.a,{path:"/checkout",children:Object(m.jsx)(re,{})}),Object(m.jsx)(y.a,{path:"/Thanks",children:Object(m.jsx)(ce,{})}),Object(m.jsx)(y.a,{path:"/",children:Object(m.jsx)(V,{})})]})})},oe=a(225),de=a(89),le=Object(de.a)({typography:{fontFamily:"Lato"},palette:{primary:{light:"#45c09f",main:"#00a278",dark:"#00845c",contrastText:"#fff"}}});s.a.render(Object(m.jsx)(r.a.StrictMode,{children:Object(m.jsx)(oe.a,{theme:le,children:Object(m.jsx)(S.a,{children:Object(m.jsx)(x.a,{maxSnack:1,anchorOrigin:{vertical:"bottom",horizontal:"center"},preventDuplicate:!0,children:Object(m.jsx)(ie,{})})})})}),document.getElementById("root"))}},[[164,1,2]]]);
//# sourceMappingURL=main.470a0fa4.chunk.js.map